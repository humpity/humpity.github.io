<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<HTML>
<HEAD>
  <META content=
  "HTML Tidy for Linux/x86 (vers 25 March 2009), see www.w3.org"
  name="generator">
  <META http-equiv="content-type" content=
  "text/html; charset=us-ascii">
  <META name="viewport" content=
  "width=device-width, initial-scale=1.0">

  <TITLE>Storage</TITLE>
  <LINK rel="stylesheet" href="main.css" type="text/css">
</HEAD>

<BODY alink="#000099" link="#000099" vlink="#990099">
  <BR style="font-family: Helvetica,Arial,sans-serif;">
  <A href="http://humpty.drivehq.com/home.htm">Humpty Promotes</A>
  &gt; <A href=
  "http://humpty.drivehq.com/promotes/rfo-basic/rfo.html">Rfo-Basic</A>&gt;
  <SMALL><A href="articles.html"></A></SMALL><BIG style=
  "font-family: Helvetica,Arial,sans-serif;"><SMALL><A href=
  "articles.html">Project Articles</A>
  &gt;</SMALL><SMALL><BR></SMALL></BIG><BR>
  <BR>
  <BIG><BIG><SPAN style="color: rgb(0, 0, 153);">Android Storage
  Map</SPAN></BIG></BIG>&nbsp; <SMALL>(Apr 2015). &nbsp;&nbsp;
  updated (sep 2015).</SMALL><BIG><BIG><BR>
  <BR></BIG></BIG> This is an outline of the different storage
  locations used in the Android apps environment.<BR>
  It might also clear up some confusion over external storage
  restrictions when Google introduced<BR>
  KitKat (4.4).<BR>
  <BR>
  <BR>

  <TABLE style="text-align: left; width: 100%;" border="0"
  cellpadding="2" cellspacing="2">
    <TBODY>
      <TR>
        <TD style="vertical-align: top;"><SMALL><SPAN style=
        "font-family: monospace;"><BIG style=
        "color: rgb(0, 0, 153);">Internal Storage</BIG><BR>
        <BR>
        <BR>
        case-sensitive<BR>
        e.g</SPAN></SMALL> <SMALL><SPAN style=
        "font-family: monospace;">ext,ext2-ext4</SPAN></SMALL></TD>

        <TD style="vertical-align: top; white-space: nowrap;">
          <TABLE style="text-align: left; width: 100%;" border="0"
          cellpadding="2" cellspacing="2">
            <TBODY>
              <TR>
                <TD style=
                "vertical-align: top; width: 50%; color: rgb(0, 0, 153); white-space: nowrap;">
                <SMALL><SPAN style=
                "font-family: monospace;"><BIG>Primary Internal<BR>
                <BR></BIG></SPAN></SMALL> <SMALL style=
                "color: black;"><SPAN style=
                "font-family: monospace;">Example:<BR>
                Internal memory<BR>
                1st partition<BR></SPAN></SMALL>
                <SMALL><SPAN style="font-family: monospace;"><SPAN style="color: rgb(102, 51, 0);">
                /</SPAN></SPAN></SMALL><BR></TD>

                <TD style="vertical-align: top;">
                  <SMALL><SPAN style=
                  "font-family: monospace; color: rgb(0, 0, 153);">PI
                  Private Storage<BR>
                  <BR style="font-family: monospace;"></SPAN>
                  <SPAN style="font-family: monospace;">e.g
                  <SPAN style=
                  "color: rgb(102, 51, 0);">/data/data/&lt;PACKAGE_NAME&gt;/</SPAN><BR>

                  <BR></SPAN></SMALL>

                  <UL>
                    <LI><SMALL><SPAN style=
                    "font-family: monospace;">private to
                    app.</SPAN></SMALL></LI>

                    <LI><SMALL><SPAN style=
                    "font-family: monospace;">app has full access
                    permissions.</SPAN></SMALL></LI>

                    <LI><SMALL><SPAN style=
                    "font-family: monospace;">no access to
                    directories above.<BR></SPAN></SMALL></LI>

                    <LI><SMALL>c<SPAN style=
                    "font-family: monospace;">leared upon
                    app-uninstall.</SPAN></SMALL></LI>
                  </UL>
                </TD>
              </TR>

              <TR>
                <TD style=
                "vertical-align: top; color: rgb(0, 0, 153);">
                <SMALL><SPAN style=
                "font-family: monospace;"><BIG>Secondary
                Internal</BIG></SPAN></SMALL></TD>

                <TD style="vertical-align: top;">
                <SMALL><BIG><SPAN style=
                "font-family: monospace;">&nbsp;
                ??</SPAN></BIG></SMALL></TD>
              </TR>
            </TBODY>
          </TABLE><SMALL><BIG><SPAN style=
          "font-family: monospace;"><BR></SPAN></BIG></SMALL>
        </TD>
      </TR>

      <TR>
        <TD style="vertical-align: top; white-space: nowrap;">
        <SMALL><SPAN style="font-family: monospace;"><BIG style=
        "color: rgb(0, 0, 153);">External Storage</BIG><BR>
        <BR>
        <BR>
        case-insensitive<BR>
        e.g<BR></SPAN></SMALL> <SMALL><SPAN style=
        "font-family: monospace;">fat,fat32,or
        other</SPAN></SMALL><BR>
        <SMALL><SPAN style="font-family: monospace;"><BR>
        </SPAN></SMALL></TD>

        <TD style="vertical-align: top; white-space: nowrap;">
          <TABLE style="text-align: left; width: 100%;" border="0"
          cellpadding="2" cellspacing="2">
            <TBODY>
              <TR>
                <TD style=
                "vertical-align: top; width: 50%; white-space: nowrap;">
                <SMALL><SPAN style=
                "font-family: monospace;"><BIG><SPAN style=
                "color: rgb(0, 0, 153);">Primary
                External</SPAN><BR></BIG></SPAN></SMALL>
                <SMALL><SPAN style="font-family: monospace;"><BR>
                All APIs prior to KITKAT reference<BR>
                here for <SPAN style=
                "text-decoration: underline;">external</SPAN>
                storage.</SPAN><BR style=
                "font-family: monospace;"></SMALL><BR>
                <SMALL><SPAN style=
                "font-family: monospace;">Examples:</SPAN><BR style="font-family: monospace;">

                R<SPAN style="font-family: monospace;">emovable
                card inside of phone</SPAN><BR style=
                "font-family: monospace;">
                <SPAN style="font-family: monospace;">e.g
                <SPAN style=
                "color: rgb(102, 51, 0);">/mnt/sdcard/&lt;&gt;</SPAN><BR>

                e.g <SPAN style=
                "color: rgb(102, 51, 0);">/SDCARD/&lt;&gt;</SPAN></SPAN><BR style="font-family: monospace;">

                <BR style="font-family: monospace;">
                <SPAN style="font-family: monospace;">Internal
                memory,<BR>
                2nd partition</SPAN><BR style=
                "font-family: monospace;">
                <SPAN style="font-family: monospace;">e.g
                <SPAN style=
                "color: rgb(102, 51, 0);">/storage/sdcard0/&lt;&gt;</SPAN></SPAN><BR style="font-family: monospace;">

                <SPAN style="font-family: monospace;">e.g
                <SPAN style=
                "color: rgb(102, 51, 0);">/sdcard/</SPAN><BR>
                e.g <SPAN style=
                "color: rgb(102, 51, 0);">/mnt/sdcard0/&lt;&gt;</SPAN></SPAN><BR style="font-family: monospace;">

                <SPAN style="font-family: monospace;">e.g
                <SPAN style=
                "color: rgb(102, 51, 0);">/mnt/emmc/&lt;&gt;</SPAN></SPAN><BR style="font-family: monospace;">

                <BR style="font-family: monospace;">
                <SPAN style="font-family: monospace;">Internal
                memory pretending to be<BR>
                sdcard (emulated)</SPAN><BR style=
                "font-family: monospace;">
                <SPAN style="font-family: monospace;">e.g
                <SPAN style=
                "color: rgb(102, 51, 0);">/storage/emulated/0/&lt;&gt;</SPAN></SPAN></SMALL></TD>

                <TD style="vertical-align: top;">
                  <TABLE style="text-align: left; width: 100%;"
                  border="0" cellpadding="2" cellspacing="2">
                    <TBODY>
                      <TR>
                        <TD style="vertical-align: top;">
                          <SMALL><SPAN style=
                          "font-family: monospace; color: rgb(0, 0, 153);">
                          PE Private Storage<BR>
                          <BR style="font-family: monospace;">
                          </SPAN>
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                          <SPAN style=
                          "font-family: monospace;"><SPAN style=
                          "color: rgb(102, 51, 0);">&lt;&gt;/Android/data/&lt;PACKAGE_NAME&gt;</SPAN></SPAN><BR style="font-family: monospace;">
                          </SMALL> <SMALL><SPAN style=
                          "font-family: monospace;">e.g
                          <SPAN style="color: rgb(102, 51, 0);">/mnt/sdcard/Android/data/&lt;PACKAGE_NAME&gt;</SPAN></SPAN></SMALL><BR style="font-family: monospace;">


                          <UL>
                            <LI><SMALL><SPAN style=
                            "font-family: monospace;">no sandboxing
                            restrictions.</SPAN></SMALL></LI>

                            <LI><SMALL><SPAN style=
                            "font-family: monospace;">cleared upon
                            app-uninstall.</SPAN></SMALL></LI>

                            <LI style="color: rgb(0, 102, 0);">
                            <SMALL><SPAN style=
                            "font-family: monospace;">Context.getExternalFilesDir()</SPAN></SMALL></LI>
                          </UL><SMALL><SPAN style=
                          "font-family: monospace;">Before
                          KITKAT:<BR></SPAN></SMALL>

                          <DIV style="margin-left: 40px;">
                            <SMALL><SPAN style=
                            "font-family: monospace;">- No
                            permissions needed for read
                            access.</SPAN></SMALL><BR>
                            <SMALL><SPAN style=
                            "font-family: monospace;">-
                            WRITE_EXTERNAL_STORAGE needed for write
                            access, even if app is
                            owner.</SPAN></SMALL><BR>
                          </DIV><SMALL><SPAN style=
                          "font-family: monospace;"><BR>
                          After KITKAT:<BR></SPAN></SMALL>

                          <DIV style="margin-left: 40px;">
                            <SMALL><SPAN style=
                            "font-family: monospace;">- Owner app
                            gets full access without needing
                            permissions.</SPAN></SMALL><BR>
                          </DIV>
                        </TD>
                      </TR>

                      <TR>
                        <TD style="vertical-align: top;">
                          <SMALL><SPAN style=
                          "font-family: monospace; color: rgb(0, 0, 153);">
                          PE Shared Storage</SPAN><BR style=
                          "font-family: monospace;">
                          <SPAN style=
                          "font-family: monospace;"><BR>
                          e.g <SPAN style=
                          "color: rgb(102, 51, 0);">/mnt/sdcard/</SPAN></SPAN><BR style="font-family: monospace;">
                          </SMALL>

                          <UL>
                            <LI><SMALL><SPAN style=
                            "font-family: monospace;">no sandboxing
                            restrictions.</SPAN></SMALL></LI>

                            <LI><SMALL><SPAN style=
                            "font-family: monospace;">not cleared
                            upon app-uninstall.</SPAN></SMALL></LI>

                            <LI><SMALL><SPAN style=
                            "font-family: monospace;"><SPAN style=
                            "color: rgb(0, 102, 0);">Environment.</SPAN><BR style="color: rgb(0, 102, 0);">

                            <SPAN style=
                            "color: rgb(0, 102, 0);">getExternalStorageDirectory()</SPAN><BR>

                            e.g <SPAN style=
                            "color: rgb(102, 51, 0);">/mnt/sdcard</SPAN></SPAN></SMALL></LI>
                          </UL><SMALL><SPAN style=
                          "font-family: monospace;">Before
                          KITKAT:<BR></SPAN></SMALL>

                          <DIV style="margin-left: 40px;">
                            <SMALL><SPAN style=
                            "font-family: monospace;">- No
                            permissions needed for read
                            access.</SPAN></SMALL><BR>
                            <SMALL><SPAN style=
                            "font-family: monospace;">-
                            WRITE_EXTERNAL_STORAGE needed for write
                            access.</SPAN></SMALL><BR>
                          </DIV><BR>
                          <SMALL><SPAN style=
                          "font-family: monospace;">After
                          KITKAT:</SPAN></SMALL>

                          <DIV style="margin-left: 40px;">
                            <SMALL><SPAN style=
                            "font-family: monospace;">-
                            READ_EXTERNAL_STORAGE needed for read
                            access.</SPAN></SMALL><BR>
                            <SMALL><SPAN style=
                            "font-family: monospace;">-
                            WRITE_EXTERNAL_STORAGE grants
                            read,write</SPAN> <SPAN style=
                            "font-family: monospace;">on same
                            volume.</SPAN></SMALL>
                          </DIV>
                        </TD>
                      </TR>
                    </TBODY>
                  </TABLE>
                </TD>
              </TR>

              <TR>
                <TD style="vertical-align: top;"><SMALL style=
                "color: rgb(0, 0, 153);"><SPAN style=
                "font-family: monospace;"><BIG>Secondary</BIG></SPAN></SMALL>
                <SMALL><SPAN style=
                "font-family: monospace;"><BIG><SPAN style=
                "color: rgb(0, 0, 153);">External</SPAN><BR>
                <BR></BIG></SPAN></SMALL> <SMALL style=
                "color: black;"><SPAN style=
                "font-family: monospace;"><SPAN style=
                "color: rgb(153, 0, 0);">(new sandbox restrictions
                being enforced here since KITKAT)</SPAN><BR>
                <BR></SPAN></SMALL> <SMALL style=
                "color: black;"><SPAN style=
                "font-family: monospace;">Examples:</SPAN><BR style="font-family: monospace;">
                </SMALL> <SMALL style="color: black;"><SPAN style=
                "font-family: monospace;">Removable card inside of
                phone.<BR></SPAN></SMALL> <SMALL style=
                "color: black;"><SPAN style=
                "font-family: monospace;">e.g <SPAN style=
                "color: rgb(102, 51, 0);">/storage/external_SD/&lt;&gt;<BR>
                </SPAN></SPAN></SMALL> <SMALL style=
                "color: black;"><SPAN style=
                "font-family: monospace;">e.g <SPAN style=
                "color: rgb(102, 51, 0);">/mnt/external_SD/&lt;&gt;<BR>
                </SPAN></SPAN></SMALL><BR style=
                "font-family: monospace;">
                <SMALL style="color: black;"><SPAN style=
                "font-family: monospace;">Removable card on outside
                slot of phone.</SPAN><BR style=
                "font-family: monospace;">
                <SPAN style="font-family: monospace;">e.g
                <SPAN style=
                "color: rgb(102, 51, 0);">/extsd/&lt;&gt;</SPAN></SPAN><BR style="font-family: monospace;">

                <SPAN style="font-family: monospace;">e.g
                <SPAN style=
                "color: rgb(102, 51, 0);">/extSdcard/&lt;&gt;</SPAN></SPAN></SMALL></TD>

                <TD style="vertical-align: top;">
                  <TABLE style="text-align: left; width: 100%;"
                  border="0" cellpadding="2" cellspacing="2">
                    <TBODY>
                      <TR>
                        <TD style="vertical-align: top;">
                          <SMALL><SPAN style=
                          "font-family: monospace; color: rgb(0, 0, 153);">
                          SE Private Storage<BR>
                          <BR style="font-family: monospace;">
                          </SPAN>
                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SMALL>
                          <SMALL style=
                          "color: rgb(102, 51, 0);"><SPAN style=
                          "font-family: monospace;">&lt;&gt;/Android/data/&lt;PACKAGE_NAME&gt;<BR>
                          </SPAN></SMALL> <SMALL><SPAN style=
                          "font-family: monospace;">e.g</SPAN></SMALL>
                          <SMALL style=
                          "color: rgb(102, 51, 0);"><SPAN style=
                          "font-family: monospace;">/extsd/Android/data/&lt;PACKAGE_NAME&gt;</SPAN></SMALL><BR>


                          <UL>
                            <LI><SMALL><SPAN style=
                            "font-family: monospace;">app is
                            sandboxed here.</SPAN></SMALL></LI>

                            <LI><SMALL><SPAN style=
                            "font-family: monospace;">cleared upon
                            app-uninstall</SPAN></SMALL></LI>

                            <LI style="color: rgb(0, 102, 0);">
                            <SMALL><SPAN style=
                            "font-family: monospace;">Context.getExternalFilesDirs()<BR>

                            - as additional
                            item.</SPAN></SMALL></LI>
                          </UL><SMALL><SPAN style=
                          "font-family: monospace;">Before
                          KITKAT:<BR></SPAN></SMALL>

                          <DIV style="margin-left: 40px;">
                            <SMALL><SPAN style=
                            "font-family: monospace;">-
                            WRITE_EXTERNAL_STORAGE needed for
                            write.</SPAN></SMALL><BR>
                          </DIV><SMALL><SPAN style=
                          "font-family: monospace;"><BR>
                          After KITKAT:<BR></SPAN></SMALL>

                          <DIV style="margin-left: 40px;">
                            <SMALL><SPAN style=
                            "font-family: monospace;">- Owner app
                            gets full access without needing
                            permissions.</SPAN></SMALL><BR>
                          </DIV>
                        </TD>
                      </TR>

                      <TR>
                        <TD style="vertical-align: top;">
                        <SMALL><SPAN style=
                        "font-family: monospace; color: rgb(0, 0, 153);">
                        SE Shared Storage<BR>
                        <BR></SPAN></SMALL> <SMALL><SPAN style=
                        "font-family: monospace;">-
                        READ_EXTERNAL_STORAGE needed for read
                        access after KITKAT.</SPAN></SMALL><BR>
                        <BR>
                        <SMALL><SPAN style=
                        "font-family: monospace;">-
                        WRITE_EXTERNAL_STORAGE does <SPAN style=
                        "text-decoration: underline;">NOT</SPAN>
                        grant sdcard_rw membership on this
                        volume.</SPAN></SMALL><BR style=
                        "font-family: monospace;">
                        <SMALL><BR>
                        <SPAN style="font-family: monospace;">In
                        KitKat, <A href=
                        "https://developer.android.com/guide/topics/providers/document-provider.html">
                        SAF</A> API needed to r/w</SPAN>
                        <SPAN style=
                        "font-family: monospace;">outside
                        application-specific directories on
                        secondary storage for specific
                        directories.<BR>
                        <BR>
                        In Lollipop,</SPAN></SMALL>
                        <SMALL><SPAN style=
                        "font-family: monospace;"><A href=
                        "https://developer.android.com/guide/topics/providers/document-provider.html">
                        SAF</A> API extension removes the
                        restriction to app-specific directories
                        with
                        ACTION_OPEN_DOCUMENT_TREE.<BR></SPAN></SMALL></TD>
                      </TR>
                    </TBODY>
                  </TABLE>
                </TD>
              </TR>
            </TBODY>
          </TABLE><BR>
        </TD>
      </TR>

      <TR>
        <TD style="vertical-align: top;"><BR></TD>

        <TD style="vertical-align: top;"><BR></TD>
      </TR>
    </TBODY>
  </TABLE><BR>
  <BR>
  <BR>
  <BR>
  <BR>
  <BR>
  Sources and Acknowledgements:<BR>
  <BR>
  <SMALL>http://android.stackexchange.com/questions/46926/android-folder-hierarchy/46934#46934<BR>

  http://stackoverflow.com/questions/23625104/storage-emulated-legacy-vs-storage-emulated-0-vs-data-data-myapp<BR>

  http://commonsware.com/blog/2014/04/08/storage-situation-external-storage.html</SMALL><BR>

  <SMALL>http://commonsware.com/blog/2014/04/07/storage-situation-internal-storage.html<BR>

  http://www.doubleencore.com/2014/03/android-external-storage/<BR>
  https://groups.google.com/forum/#!topic/android-platform/14VUiIgwUjY%5B1-25-false%5D<BR>

  http://stackoverflow.com/questions/22414417/saving-data-to-externalsdcard-android-data-app-package-name-in-kitkat</SMALL><BR>

  <SMALL>http://www.techtimes.com/articles/19510/20141106/android-5-0-lollipop-comes-with-better-sd-card-support-hoorah-google.htm</SMALL><BR>

  <HR style=
  "width: 100%; height: 2px; font-family: Helvetica,Arial,sans-serif;">

  Support my projects!<BR>
  <A href=
  "http://humpty.drivehq.com/payments/payment.html">Donate</A><BR style="font-family: Helvetica,Arial,sans-serif;">

  <BR style="font-family: Helvetica,Arial,sans-serif;">
  <HR style=
  "width: 100%; height: 2px; font-family: Helvetica,Arial,sans-serif;">

  <BR style="font-family: Helvetica,Arial,sans-serif;">
  <BR>
  <SCRIPT type="text/javascript" src=
  "http://humpty.drivehq.com/main_index.js">
</SCRIPT>
</BODY>
</HTML>
