<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
  
  <meta content="HTML Tidy for Linux/x86 (vers 25 March 2009), see www.w3.org" name="generator">

  
  <meta http-equiv="content-type" content="text/html; charset=us-ascii">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Storage</title>

  
  
  <link rel="stylesheet" href="main.css" type="text/css">

</head><body alink="#000099" link="#000099" vlink="#990099">
<br style="font-family: Helvetica,Arial,sans-serif;">

<a href="http://humpty.drivehq.com/home.htm">Humpty Promotes</a> &gt; <a href="http://humpty.drivehq.com/promotes/rfo-basic/rfo.html">Rfo-Basic</a><small>
</small>&gt;<small><a href="articles.html"><big style="font-family: Helvetica,Arial,sans-serif;"> </big></a></small><big style="font-family: Helvetica,Arial,sans-serif;"><small><a href="articles.html">Project Articles</a> &gt;</small><small><br>
</small></big><br>

<br>

<big><big><span style="color: rgb(0, 0, 153);">Android Storage Map</span></big></big>&nbsp;
<small>(Apr 2015)</small><big><big><br>
<br>
</big></big> This is an outline of the different storage locations used
in the Android apps environment.<br>

It might also clear up some confusion over external storage
restrictions when Google introduced<br>

KitKat (4.4).<br>

<br>

<br>

<table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">

  <tbody>
    <tr>
      <td style="vertical-align: top;"><small><span style="font-family: monospace;"><big style="color: rgb(0, 0, 153);">Internal
Storage</big><br>
      <br>
      <br>
case-sensitive<br>
e.g</span></small> <small><span style="font-family: monospace;">ext,ext2-ext4</span></small></td>
      <td style="vertical-align: top; white-space: nowrap;">
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="vertical-align: top; width: 50%; color: rgb(0, 0, 153); white-space: nowrap;">
            <small><span style="font-family: monospace;"><big>Primary
Internal<br>
            <br>
            </big></span></small> <small style="color: black;"><span style="font-family: monospace;">Example:<br>
Internal memory<br>
1st partition<br>
            </span></small><small><span style="font-family: monospace;"><span style="color: rgb(102, 51, 0);">/</span></span></small><br>
            </td>
            <td style="vertical-align: top;"> <small><span style="font-family: monospace; color: rgb(0, 0, 153);">PI Private
Storage<br>
            <br style="font-family: monospace;">
            </span> <span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/data/data/&lt;PACKAGE_NAME&gt;/</span><br>
            <br>
            </span></small>
            <ul>
              <li><small><span style="font-family: monospace;">private
to app.</span></small></li>
              <li><small><span style="font-family: monospace;">app has
full access permissions.</span></small></li>
              <li><small><span style="font-family: monospace;">no
access to directories above.<br>
                </span></small></li>
              <li><small>c<span style="font-family: monospace;">leared
upon app-uninstall.</span></small></li>
            </ul>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top; color: rgb(0, 0, 153);"> <small><span style="font-family: monospace;"><big>Secondary Internal</big></span></small></td>
            <td style="vertical-align: top;"> <small><big><span style="font-family: monospace;">&nbsp; ??</span></big></small></td>
          </tr>
        </tbody>
      </table>
      <small><big><span style="font-family: monospace;"><br>
      </span></big></small> </td>
    </tr>
    <tr>
      <td style="vertical-align: top; white-space: nowrap;"> <small><span style="font-family: monospace;"><big style="color: rgb(0, 0, 153);">External
Storage</big><br>
      <br>
      <br>
case-insensitive<br>
e.g<br>
      </span></small><small><span style="font-family: monospace;">fat,fat32,or
other</span></small><br>
      <small><span style="font-family: monospace;"><br>
      </span></small></td>
      <td style="vertical-align: top; white-space: nowrap;">
      <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
        <tbody>
          <tr>
            <td style="vertical-align: top; width: 50%; white-space: nowrap;"> <small><span style="font-family: monospace;"><big><span style="color: rgb(0, 0, 153);">Primary External</span><br>
            </big></span></small><small><span style="font-family: monospace;"><br>
All APIs prior to KITKAT reference<br>
here for <span style="text-decoration: underline;">external</span>
storage.</span><br style="font-family: monospace;">
            </small><br>
            <small><span style="font-family: monospace;">Examples:</span><br style="font-family: monospace;">
R<span style="font-family: monospace;">emovable card inside of phone</span><br style="font-family: monospace;">
            <span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/mnt/sdcard/&lt;&gt;</span><br>
e.g <span style="color: rgb(102, 51, 0);">/SDCARD/&lt;&gt;</span></span><br style="font-family: monospace;">
            <br style="font-family: monospace;">
            <span style="font-family: monospace;">Internal memory,<br>
2nd partition</span><br style="font-family: monospace;">
            <span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/storage/sdcard0/&lt;&gt;</span></span><br style="font-family: monospace;">
            <span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/sdcard/</span><br>
e.g <span style="color: rgb(102, 51, 0);">/mnt/sdcard0/&lt;&gt;</span></span><br style="font-family: monospace;">
            <span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/mnt/emmc/&lt;&gt;</span></span><br style="font-family: monospace;">
            <br style="font-family: monospace;">
            <span style="font-family: monospace;">Internal memory
pretending to be<br>
sdcard (emulated)</span><br style="font-family: monospace;">
            <span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/storage/emulated/0/&lt;&gt;</span></span></small></td>
            <td style="vertical-align: top;">
            <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
              <tbody>
                <tr>
                  <td style="vertical-align: top;"> <small><span style="font-family: monospace; color: rgb(0, 0, 153);"> PE Private
Storage<br>
                  <br style="font-family: monospace;">
                  </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="font-family: monospace;"><span style="color: rgb(102, 51, 0);">&lt;&gt;/Android/data/&lt;PACKAGE_NAME&gt;</span></span><br style="font-family: monospace;">
                  </small> <small><span style="font-family: monospace;">e.g
                  <span style="color: rgb(102, 51, 0);">/mnt/sdcard/Android/data/&lt;PACKAGE_NAME&gt;</span></span></small><br style="font-family: monospace;">
                  <ul>
                    <li><small><span style="font-family: monospace;">no
sandboxing restrictions.</span></small></li>
                    <li><small><span style="font-family: monospace;">cleared
upon app-uninstall.</span></small></li>
                    <li style="color: rgb(0, 102, 0);"> <small><span style="font-family: monospace;">Context.getExternalFilesDir()</span></small></li>
                  </ul>
                  <small><span style="font-family: monospace;">Before
KITKAT:<br>
                  </span></small>
                  <div style="margin-left: 40px;"> <small><span style="font-family: monospace;">- No permissions needed for read
access.</span></small><br>
                  <small><span style="font-family: monospace;">-
WRITE_EXTERNAL_STORAGE needed for write access, even if app is owner.</span></small><br>
                  </div>
                  <small><span style="font-family: monospace;"><br>
After KITKAT:<br>
                  </span></small>
                  <div style="margin-left: 40px;"> <small><span style="font-family: monospace;">- Owner app gets full access without
needing permissions.</span></small><br>
                  </div>
                  </td>
                </tr>
                <tr>
                  <td style="vertical-align: top;"> <small><span style="font-family: monospace; color: rgb(0, 0, 153);"> PE Shared
Storage</span><br style="font-family: monospace;">
                  <span style="font-family: monospace;"><br>
e.g <span style="color: rgb(102, 51, 0);">/mnt/sdcard/</span></span><br style="font-family: monospace;">
                  </small>
                  <ul>
                    <li><small><span style="font-family: monospace;">no
sandboxing restrictions.</span></small></li>
                    <li><small><span style="font-family: monospace;">not
cleared upon app-uninstall.</span></small></li>
                    <li><small><span style="font-family: monospace;"><span style="color: rgb(0, 102, 0);">Environment.</span><br style="color: rgb(0, 102, 0);">
                      <span style="color: rgb(0, 102, 0);">getExternalStorageDirectory()</span><br>
e.g <span style="color: rgb(102, 51, 0);">/mnt/sdcard</span></span></small></li>
                  </ul>
                  <small><span style="font-family: monospace;">Before
KITKAT:<br>
                  </span></small>
                  <div style="margin-left: 40px;"> <small><span style="font-family: monospace;">- No permissions needed for read
access.</span></small><br>
                  <small><span style="font-family: monospace;">-
WRITE_EXTERNAL_STORAGE needed for write access.</span></small><br>
                  </div>
                  <br>
                  <small><span style="font-family: monospace;">After
KITKAT:</span></small>
                  <div style="margin-left: 40px;"> <small><span style="font-family: monospace;">- READ_EXTERNAL_STORAGE needed for
read access.</span></small><br>
                  <small><span style="font-family: monospace;">-
WRITE_EXTERNAL_STORAGE grants read,write</span> <span style="font-family: monospace;">on same volume.</span></small> </div>
                  </td>
                </tr>
              </tbody>
            </table>
            </td>
          </tr>
          <tr>
            <td style="vertical-align: top;"><small style="color: rgb(0, 0, 153);"><span style="font-family: monospace;"><big>Secondary</big></span></small>
            <small><span style="font-family: monospace;"><big><span style="color: rgb(0, 0, 153);">External</span><br>
            <br>
            </big></span></small> <small style="color: black;"><span style="font-family: monospace;"><span style="color: rgb(153, 0, 0);">(new
sandbox restrictions being enforced here since KITKAT)</span><br>
            <br>
            </span></small> <small style="color: black;"><span style="font-family: monospace;">Examples:</span><br style="font-family: monospace;">
            </small> <small style="color: black;"><span style="font-family: monospace;">Removable card inside of phone.<br>
            </span></small><small style="color: black;"><span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/storage/external_SD/&lt;&gt;<br>
            </span></span></small> <small style="color: black;"><span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/mnt/external_SD/&lt;&gt;<br>
            </span></span></small><br style="font-family: monospace;">
            <small style="color: black;"><span style="font-family: monospace;">Removable card on outside slot of
phone.</span><br style="font-family: monospace;">
            <span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/extsd/&lt;&gt;</span></span><br style="font-family: monospace;">
            <span style="font-family: monospace;">e.g <span style="color: rgb(102, 51, 0);">/extSdcard/&lt;&gt;</span></span></small></td>
            <td style="vertical-align: top;">
            <table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
              <tbody>
                <tr>
                  <td style="vertical-align: top;"> <small><span style="font-family: monospace; color: rgb(0, 0, 153);"> SE Private
Storage<br>
                  <br style="font-family: monospace;">
                  </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</small>
                  <small style="color: rgb(102, 51, 0);"><span style="font-family: monospace;">&lt;&gt;/Android/data/&lt;PACKAGE_NAME&gt;<br>
                  </span></small> <small><span style="font-family: monospace;">e.g</span></small> <small style="color: rgb(102, 51, 0);"><span style="font-family: monospace;">/extsd/Android/data/&lt;PACKAGE_NAME&gt;</span></small><br>
                  <ul>
                    <li><small><span style="font-family: monospace;">app
is sandboxed here.</span></small></li>
                    <li><small><span style="font-family: monospace;">cleared
upon app-uninstall</span></small></li>
                    <li style="color: rgb(0, 102, 0);"> <small><span style="font-family: monospace;">Context.getExternalFilesDirs()<br>
- as additional item.</span></small></li>
                  </ul>
                  <small><span style="font-family: monospace;">Before
KITKAT:<br>
                  </span></small>
                  <div style="margin-left: 40px;"> <small><span style="font-family: monospace;">- WRITE_EXTERNAL_STORAGE needed for
write.</span></small><br>
                  </div>
                  <small><span style="font-family: monospace;"><br>
After KITKAT:<br>
                  </span></small>
                  <div style="margin-left: 40px;"> <small><span style="font-family: monospace;">- Owner app gets full access without
needing permissions.</span></small><br>
                  </div>
                  </td>
                </tr>
                <tr>
                  <td style="vertical-align: top;"> <small><span style="font-family: monospace; color: rgb(0, 0, 153);"> SE Shared
Storage<br>
                  <br>
                  </span></small> <small><span style="font-family: monospace;">- READ_EXTERNAL_STORAGE needed for
read access after KITKAT.</span></small><br>
                  <br>
                  <small><span style="font-family: monospace;">-
WRITE_EXTERNAL_STORAGE does <span style="text-decoration: underline;">NOT</span>
grant sdcard_rw membership on this volume.</span></small><br style="font-family: monospace;">
                  <small><br>
                  <span style="font-family: monospace;">In KitKat, no
public APIs to obtain a path to anything</span> <span style="font-family: monospace;">outside application-specific
directories on secondary storage.</span></small></td>
                </tr>
              </tbody>
            </table>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
  </tbody>
</table>

<br>

<br>

<br>

<br>

<br>

<br>

Sources and Acknowledgements:<br>

<br>

<small>http://android.stackexchange.com/questions/46926/android-folder-hierarchy/46934#46934<br>
http://stackoverflow.com/questions/23625104/storage-emulated-legacy-vs-storage-emulated-0-vs-data-data-myapp<br>
http://commonsware.com/blog/2014/04/08/storage-situation-external-storage.html</small><br>

<small>http://commonsware.com/blog/2014/04/07/storage-situation-internal-storage.html<br>
http://www.doubleencore.com/2014/03/android-external-storage/<br>
https://groups.google.com/forum/#!topic/android-platform/14VUiIgwUjY%5B1-25-false%5D<br>
http://stackoverflow.com/questions/22414417/saving-data-to-externalsdcard-android-data-app-package-name-in-kitkat</small><br>

<hr style="width: 100%; height: 2px; font-family: Helvetica,Arial,sans-serif;">
Support my projects!<br>

<a href="../../donate.html">Donate via BitCoin</a>.<br style="font-family: Helvetica,Arial,sans-serif;">

<br style="font-family: Helvetica,Arial,sans-serif;">

<hr style="width: 100%; height: 2px; font-family: Helvetica,Arial,sans-serif;">
<br style="font-family: Helvetica,Arial,sans-serif;">

<br>

<script type="text/javascript" src="http://humpty.drivehq.com/main_index.js">
</script>
</body></html>