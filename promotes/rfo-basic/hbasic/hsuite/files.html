<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
  <META content="HTML Tidy for HTML5 for Linux version 5.6.0" name=
  "generator">
  <META http-equiv="content-type" content=
  "text/html; charset=utf-8">
  <META name="viewport" content=
  "width=device-width, initial-scale=1.0">
  <TITLE>Files</TITLE>
  <LINK rel="stylesheet" href="main.css" type="text/css">
</HEAD>
<BODY vlink="#990099" link="#000099" alink="#000099">
  <BR>
  <A href="../hbasic.html">hBasic</A> &gt; <A href=
  "index.html">hSuite</A> &gt; File Locations<BR>
  <BR style="font-family: Helvetica,Arial,sans-serif;">
  <TABLE style=
  "border-right: 1px solid black; border-bottom: 1px solid black; text-align: left; width: 100%; font-family: Helvetica,Arial,sans-serif;"
  cellspacing="2" cellpadding="8">
    <TBODY>
      <TR>
        <TD style="vertical-align: top;">
          <DIV style="text-align: right;">
            <BIG>hSuite</BIG><BR>
          </DIV><BIG><BIG style="color: rgb(0, 0, 153);">File
          Locations</BIG></BIG><BR>
          <DIV style="margin-left: 120px;">
            <FONT size="+1">for hSuite Standalone Compilation<BR>
            <BR></FONT>
          </DIV>
          <TABLE style=
          "text-align: left; width: 90%; margin-left: auto; margin-right: auto;"
          border="0">
            <TBODY>
              <TR>
                <TD style="width: 50%;"><FONT size="+1"><A href=
                "#about-assets">About Assets</A><BR></FONT></TD>
                <TD style="height: 1px;">The virtual file
                system.<BR></TD>
              </TR>
              <TR>
                <TD style="vertical-align: top;"><A href=
                "#app-created-files"><FONT size="+1">App Created
                Files</FONT></A></TD>
                <TD style="vertical-align: top;"><BR></TD>
              </TR>
              <TR>
                <TD style="vertical-align: top;"><FONT size=
                "+1"><A href="#assets-vs-real-files">Assets vs Real
                Files</A><BR></FONT></TD>
                <TD style="vertical-align: top;">Know the
                difference.<BR></TD>
              </TR>
              <TR>
                <TD height="1"><A href=
                "#unsupported-features"><FONT size="+1">Unsupported
                Features<BR></FONT></A></TD>
                <TD height="1">hSuite does not support
                confusion.<BR></TD>
              </TR>
              <TR>
                <TD style="vertical-align: top;"><A href=
                "#assets-to-sdcard">Assets to File
                System</A><BR></TD>
                <TD style="vertical-align: top;">How to copy from
                Assets to File System</TD>
              </TR>
            </TBODY>
          </TABLE><FONT size="+1" color="#000099"><BR></FONT>
          <FONT size="+1" color="#000099"><A name="about-assets"
          id="keys"></A>About Assets</FONT><BR>
          <DIV style="margin-left: 80px;">
            <BR>
            All files that you need to exist 'before' you start
            your app must be under<BR>
            <SPAN style="color: rgb(102, 51, 0);">[source]</SPAN> ,
            <SPAN style="color: rgb(102, 51, 0);">[data]</SPAN> ,
            or&nbsp; <SPAN style=
            "color: rgb(102, 51, 0);">[databases]</SPAN> of you
            project base. These are called <SPAN style=
            "text-decoration: underline;">'supported'
            directories</SPAN>.<BR>
            <BR>
            <SPAN style=
            "color: rgb(102, 51, 0);">[data]</SPAN>&nbsp; and&nbsp;
            <SPAN style=
            "color: rgb(102, 51, 0);">[databases]</SPAN>&nbsp; must
            be indicated via hSuite options.<BR>
            All the above files are known as <SPAN style=
            "font-weight: bold;">Assets</SPAN> files.<BR>
            They are <SPAN style=
            "color: rgb(153, 0, 0);"><SPAN style=
            "text-decoration: underline;">read-only</SPAN></SPAN>
            and are embedded into the package as a virtual
            file-system.<BR>
            Internally, this VFS is a file that pretends to be a
            disk drive.<BR>
            <BR>
            Files outside these <SPAN style=
            "text-decoration: underline;">supported
            directories</SPAN> will not get copied to assets, so
            will not exist before your app runs.<BR>
            However, files outside these supported directories can
            be created '<SPAN style=
            "text-decoration: underline;">after</SPAN>' your app
            runs. And they can even have<BR>
            the same names and paths as the Assets files. The
            difference is that they will be created on the 'real '
            file system.<BR>
            <BR>
          </DIV><A name="app-created-files" id="keystores"></A>
          <FONT size="+1" color="#000099">App Created
          Files</FONT><BR>
          <DIV style="margin-left: 80px;">
            Files can be created by your app code e.g using the
            TEXT and BYTE commands.<BR>
            These files will created on the real file system (not
            Assets) on external storage (historically name
            'sdcard').<BR>
            <BR>
            App created files are more flexible. They are
            <SPAN style="color: rgb(0, 51, 0);"><SPAN style=
            "text-decoration: underline;">writable</SPAN></SPAN>
            and can be put anywhere under the<BR>
            <A href=
            "../other/transfer.html#app_path">[app_path]</A>
            directory. This is the directory just above
            <SPAN style="color: rgb(102, 51, 0);">[source],</SPAN>
            <SPAN style="color: rgb(102, 51, 0);">[data]</SPAN> and
            <SPAN style=
            "color: rgb(102, 51, 0);">[databases].</SPAN><BR>
            ( In fact, you even have write-access to <SPAN style=
            "color: rgb(0, 0, 153);">[app_path]</SPAN>'s parent
            [com.rfo.myApp] ) which is the start of <A href=
            "../hmanual/package.html/scoped">scoped-storage</A>.<BR>

            You can also create paths that are identical to Assets
            paths in supported directories (see below).<BR>
            <BR>
          </DIV><A name="assets-vs-real-files" id=
          "assets-vs-real-files"></A><SPAN style=
          "color: rgb(0, 0, 153);"><FONT size="+1">Assets vs Real
          Files</FONT></SPAN><BR>
          <DIV style="margin-left: 80px;">
            <BR>
            If an App creates a file with the same name as one in
            Assets e.g <SPAN style=
            "color: rgb(102, 51, 0);">&lt;..&gt;/data/cartman.png</SPAN><BR>

            then you will have two different files of the same name
            on the same path.<BR>
            <BR>
            The general rule for most commands is to first look on
            the real file system (sdcard). If it doesn't exist,
            then Basic will<BR>
            look inside Assets. e.g FILE.OPEN, FILE.TYPE.. etc<BR>
            <BR>
            <SPAN style="text-decoration: underline;"><SPAN style=
            "color: rgb(102, 0, 0);">The Exceptions</SPAN></SPAN>
            to this rule is<BR>
            <DIV style="margin-left: 40px;">
              a)
              RUN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              -&nbsp; ONLY looks in Assets<BR>
              b) FILE.EXISTS -&nbsp; ONLY looks in real file system
              (sdcard i.e external).<BR>
            </DIV><BR>
          </DIV><A name="unsupported-features" id="keystores"></A>
          <FONT size="+1" color="#000099">Unsupported
          Features</FONT><BR>
          <DIV style="margin-left: 40px;">
            <FONT size="+1" color="#000099"><BR></FONT>
          </DIV>
          <DIV style="margin-left: 80px;">
            <FONT size="+1"><SPAN style=
            "text-decoration: underline;">Files to load at
            startup</SPAN></FONT>
          </DIV>
          <DIV style="margin-left: 80px;">
            Legacy Basic and perhaps other apk makers have a
            feature that supports copying files from read-only
            assets to the real-file-system during <SPAN style=
            "text-decoration: underline;">apk creation</SPAN>.
            These files will be copied to external storage (sdcard)
            at <SPAN style="text-decoration: underline;">every
            program startup !!</SPAN>, overwriting any changes you
            may have made. This is undesirable in many
            situations.<BR>
          </DIV>
          <DIV style="margin-left: 40px;">
            <BR>
            <DIV style="margin-left: 40px;">
              hSuite does <SPAN style=
              "font-weight: bold;">not</SPAN> support this feature,
              due to the confusion it creates.<BR>
              <BR>
            </DIV>
          </DIV><SPAN style="color: rgb(0, 0, 153);"><FONT size=
          "+1"><A name="assets-to-sdcard" id=
          "assets-to-sdcard"></A>How to copy from Assets to File
          System</FONT></SPAN><BR>
          <DIV style="margin-left: 40px;">
            <DIV style="margin-left: 40px;">
              <BR>
            </DIV>
            <DIV style="margin-left: 40px;">
              If you need files that need copying from assets to
              external storage (sdcard), then the program must
              <SPAN style="text-decoration: underline;">do this
              itself</SPAN> ,<BR>
              e.g<BR>
            </DIV>
          </DIV>
          <DIV style="margin-left: 80px;">
            <DIV style="margin-left: 40px;">
              <SPAN style=
              "font-family: Courier New, Courier, monospace;">file.exists
              e, <SPAN style=
              "color: rgb(102, 51, 0);">"settings.dat"</SPAN>&nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;</SPAN> <SPAN style=
              "color: rgb(102, 102, 102);">% looks only on
              sdcard/data</SPAN><BR>
              <SPAN style=
              "font-family: Courier New, Courier, monospace;">if !e
              then&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN> <SPAN style=
              "color: rgb(102, 102, 102);">% if not exist on sdcard
              /data</SPAN><BR>
              <SPAN style=
              "font-family: Courier New, Courier, monospace;">&nbsp;&nbsp;
              &nbsp;&nbsp; byte.open r,fv, <SPAN style=
              "color: rgb(102, 51, 0);">"settings.dat"</SPAN>&nbsp;</SPAN>
              <SPAN style="color: rgb(102, 102, 102);">% get it
              from assets</SPAN><BR>
              <SPAN style=
              "font-family: Courier New, Courier, monospace;">&nbsp;
              &nbsp; &nbsp; if fv&lt;&gt;-1 then byte.copy
              fv,<SPAN style=
              "color: rgb(102, 51, 0);">"settings.dat"</SPAN>&nbsp;&nbsp;</SPAN>
              <SPAN style="color: rgb(102, 102, 102);">% make a
              copy to sdcard/data</SPAN><BR>
              <SPAN style=
              "font-family: Courier New, Courier, monospace;">endif</SPAN><BR>
            </DIV><BR>
            <SPAN style="text-decoration: underline;">The above
            manual method is much clearer and
            user-controllable</SPAN>.<BR>
            <BR>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">File.Exists</SPAN>&nbsp;&nbsp;
            only looks in file system. Does not look into
            /assets/<BR>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">File.Type</SPAN>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            first looks in the file system, if not found then looks
            in /assets/<BR>
            <BR>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;"><SPAN style="color: rgb(0, 0, 153);">
            file.exists</SPAN> e, paths$&nbsp;&nbsp;&nbsp;</SPAN>
            <SPAN style="color: rgb(102, 102, 102);">% look only in
            the file system</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">if e
            then</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
            print "file is on sdcard"</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">else&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>
            <SPAN style="color: rgb(102, 102, 102);">% not in file
            system</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
            <SPAN style="color: rgb(0, 0, 153);">file.type</SPAN>
            typ$, path$</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
            if typ$="x" then</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">&nbsp;&nbsp;&nbsp;
            &nbsp; &nbsp; print "file does not exist
            anywhere"</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
            else</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            print "file is in assets"</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">&nbsp;&nbsp;&nbsp;&nbsp;
            endif</SPAN><SPAN style=
            "font-family: Courier New, Courier, monospace;"><BR></SPAN>
            <SPAN style=
            "font-family: Courier New, Courier, monospace;">endif</SPAN><SPAN style="font-family: Courier New, Courier, monospace;"><BR>
            </SPAN><BR>
          </DIV>
          <DIV style="margin-left: 40px;"></DIV>
        </TD>
      </TR>
      <TR>
        <TD style="width: 50%;">-End.<BR></TD>
      </TR>
    </TBODY>
  </TABLE><BR>
  <SCRIPT type="text/javascript" src=
  "https://humpity.github.io/counter.js"></SCRIPT>
</BODY>
</HTML>
